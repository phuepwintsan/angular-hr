<div class="card">
  <p-card>
    <p-table
      #dt1
      sortField="allowanceId"
      [sortOrder]="-1"
      [value]="allowances"
      dataKey="allowanceId"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[5, 10, 20]"
      [globalFilterFields]="[
        'allowanceId',
        'companyId',
        'branchId',
        'deptId',
        'positionId',
        'allowanceName',
        'description'
      ]"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template #caption>
        <div class="flex justify-between">
          <p-button label="Create" routerLink="entry"
            ><i class="pi pi-plus"></i
          ></p-button>
          <p-iconfield
            icon="pi pi-check"
            iconPosition="left"
            class="w-80 mt-2 sm:mt-0"
          >
            <input
              pInputText
              type="text"
              (input)="dt1.filterGlobal($any($event.target).value, 'contains')"
              placeholder="       Search keyword"
              class="p-inputtext w-full border rounded-lg px-3 py-2"
            />
          </p-iconfield>
        </div>
      </ng-template>

      <ng-template #header>
        <tr>
          <th pSortableColumn="allowanceId">
            AllowanceId<p-sortIcon field="allowanceId" />
          </th>
          <th pSortableColumn="companyId">
            Company Id<p-sortIcon field="companyId" />
          </th>
          <th pSortableColumn="branchId">
            Branch Id<p-sortIcon field="branchId" />
          </th>
          <th pSortableColumn="deptId">
            Department Id<p-sortIcon field="deptId" />
          </th>
          <th pSortableColumn="positionId">
            Position Id<p-sortIcon field="positionId" />
          </th>
          <th pSortableColumn="allowanceName">
            Allowance Name<p-sortIcon field="allowanceName" />
          </th>
          <th pSortableColumn="description" class="min-w-40">
            Description<p-sortIcon field="description" />
          </th>
          <th pSortableColumn="status" class="min-w-40">
            Status<p-sortIcon field="status" />
          </th>
          <th pSortableColumn="createdOn" class="min-w-40">
            Created On<p-sortIcon field="createdOn" />
          </th>
          <th pSortableColumn="createdBy" class="min-w-40">
            Created By<p-sortIcon field="createdBy" />
          </th>
          <th pSortableColumn="updatedOn" class="min-w-40">
            Updated On<p-sortIcon field="updatedOn" />
          </th>
          <th pSortableColumn="updatedBy" class="min-w-40">
            Updated By<p-sortIcon field="updatedBy" />
          </th>
          <th pSortableColumn="deletedOn" class="min-w-40">
            Deleted On<p-sortIcon field="deletedOn" />
          </th>
          <th pSortableColumn="deletedBy" class="min-w-40">
            Deleted By<p-sortIcon field="deletedBy" />
          </th>
          <th pSortableColumn="remark" class="min-w-40">
            Remark<p-sortIcon field="remark" />
          </th>
        </tr>
        <tr>
          <th>
            <p-columnFilter
              type="text"
              field="allowanceId"
              placeholder="Search by ID"
              ariaLabel="Filter ID"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="companyId"
              placeholder="Search by Id"
              ariaLabel="Filter Name"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="branchId"
              placeholder="Search by Id"
              ariaLabel="Filter Id"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="deptId"
              placeholder="Search by Id"
              ariaLabel="Filter Id"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="positionId"
              placeholder="Search by Id"
              ariaLabel="Filter Id"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="allowanceName"
              placeholder="Search by Name"
              ariaLabel="Filter Id"
            ></p-columnFilter>
          </th>
        </tr>
      </ng-template>

      <ng-template #body let-allowance>
        <tr>
          <td>{{ allowance.allowanceId }}</td>
          <td>{{ allowance.companyId }}</td>
          <td>{{ allowance.branchId }}</td>
          <td>{{ allowance.deptId }}</td>
          <td>{{ allowance.positionId }}</td>
          <td>{{ allowance.allowanceName }}</td>
          <td>
            <div [innerHTML]="allowance.description"></div>
          </td>
          <td>
            <p-tag
              [value]="allowance.status"
              [severity]="getSeverity(allowance.status)"
            />
          </td>
          <td>{{ allowance.createdOn }}</td>
          <td>{{ allowance.createdBy }}</td>
          <td>{{ allowance.updatedOn }}</td>
          <td>{{ allowance.updatedBy }}</td>
          <td>{{ allowance.deletedOn }}</td>
          <td>{{ allowance.deletedBy }}</td>
          <td>{{ allowance.remark }}</td>
          <td class="flex flex-row gap-2">
            <p-button (onClick)="update(allowance)"
              ><i class="pi pi-user-edit"></i>Edit</p-button
            >
            <p-button (onClick)="delete(allowance)"
              ><i class="pi pi-times"></i>Delete</p-button
            >
          </td>
        </tr>
      </ng-template>

      <ng-template #emptymessage>
        <tr>
          <td colspan="3">No departments found.</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</div>
